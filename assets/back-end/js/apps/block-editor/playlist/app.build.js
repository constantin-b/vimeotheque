(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(t){var o=function(t,o){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(o)?o:o+""}function r(t,o,r){return o=i(o),function(t,o){if(o&&("object"===e(o)||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,n()?Reflect.construct(o,r||[],i(t).constructor):o.apply(t,r))}function n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n=function(){return!!e})()}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}wp.i18n.__;var c=wp.date.dateI18n,s=wp.components.Button,l=vmtq.noImageUrl,u=function(e){function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r(this,o,[e])).post=t.props.post,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(o,React.Component),n=o,(i=[{key:"getImageUrl",value:function(){return void 0!==this.post.vimeo_video.thumbnail?this.post.vimeo_video.thumbnail:l}},{key:"render",value:function(){var e=this;return React.createElement("div",{className:"col-xs-6  col-sm-4 col-md-3 col-lg-2 grid-element ".concat(this.props.className)},React.createElement("div",{className:"cvm-video"},React.createElement("div",{className:"cvm-thumbnail"},null!=this.post.vimeo_video&&React.createElement("div",null,React.createElement("img",{src:this.getImageUrl()}),React.createElement("span",{className:"duration"},this.post.vimeo_video._duration))),React.createElement("div",{className:"details"},React.createElement("h4",null,jQuery("<textarea />").html(this.post.title.rendered).text()),React.createElement("div",{className:"meta"},React.createElement("span",{className:"publish-date"},c("M d Y",this.post.date))),React.createElement("div",{className:"actions"},React.createElement(s,{className:"select-button",isLink:!0,onClick:function(){e.props.onSelect(e.post)}},this.props.selectText)))))}}])&&t(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}();u.defaultProps={post:null,selectText:"Select",onSelect:function(e){},className:""};const p=u,f=lodash;function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function d(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return v(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function h(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}function g(e,t,o){return t=O(t),function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,o||[],O(e).constructor):t.apply(e,o))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}wp.data.registerStore("vimeotheque-post-store",{reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"ADD_POSTS"==t.type?e.concat([t.payload]):e},selectors:{getPosts:function(e,t){return(0,f.find)(e,{url:t})}},actions:{addPosts:function(e,t,o,r){return{type:"ADD_POSTS",payload:{url:e,posts:t,total:o,pages:r}}}}});var E=wp.apiFetch,P=wp.components.Spinner,j=vmtq.postTypes,R=wp.data,_=R.select,C=R.dispatch,k=wp.i18n.__,T=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=g(this,t,[e])).state={posts:[],loading:!1,error:!1,totalEntries:0,totalPages:0},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,React.Component),o=t,(r=[{key:"makeRequest",value:function(){var e=this;this.setState({loading:!0}),this.props.onRequestBegin();var t={post_type:this.props.postType,page:this.props.page,search:this.props.search.query,per_page:this.props.perPage,orderby:"date",order:"desc",vimeothequeMetaKey:"true"};if(this.props.search.category){var o="category"==this.props.taxonomy?"categories":this.props.taxonomy;t[o]=this.props.search.category}var r="".concat(j[this.props.postType].post_type_endpoint,"?")+(0,f.map)((0,f.keys)(t),(function(e){return"".concat(e,"=").concat(t[e])})).join("&"),n=_("vimeotheque-post-store").getPosts(r);if(null!=n){var i=[].concat(d(this.state.posts),d(n.posts));this.setState({totalEntries:n.total,totalPages:n.pages,loading:!1,posts:i}),this.props.onRequestFinish({postsCount:i.length,totalEntries:n.total,totalPages:n.pages})}else E({path:r,method:"GET",parse:!1}).then((function(t){return e.setState({totalEntries:t.headers.get("X-WP-Total"),totalPages:t.headers.get("X-WP-TotalPages")}),t.json()})).then((function(t){var o=[].concat(d(e.state.posts),d(t));e.setState({posts:o,loading:!1}),e.props.onRequestFinish({postsCount:o.length,totalEntries:e.state.totalEntries,totalPages:e.state.totalPages}),C("vimeotheque-post-store").addPosts(r,t,e.state.totalEntries,e.state.totalPages)})).catch((function(t){e.setState({error:t,loading:!1}),e.props.onRequestError(t)}))}},{key:"componentDidMount",value:function(){this.makeRequest()}},{key:"componentDidUpdate",value:function(e){this.props.postType!=e.postType&&"selected"!=e.postType||this.props.search!=e.search?this.setState({posts:[],loading:!1,error:!1,totalEntries:0,totalPages:0},this.makeRequest):this.props.page!=e.page&&!this.state.error&&this.props.page<=this.state.totalPages&&this.makeRequest()}},{key:"hasPost",value:function(e){var t,o=function(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=m(e))){o&&(e=o);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==o.return||o.return()}finally{if(c)throw i}}}}(this.props.selected);try{for(o.s();!(t=o.n()).done;)if(t.value.id==e.id)return!0}catch(e){o.e(e)}finally{o.f()}}},{key:"selectText",value:function(e){return this.hasPost(e)?k("Remove video","codeflavors-vimeo-video-post-lite"):k("Select video","codeflavors-vimeo-video-post-lite")}},{key:"render",value:function(){var e=this;return this.state.loading||0!=this.state.posts.length?React.createElement("div",{className:"vimeotheque-entries-container"},React.createElement("div",{className:"vimeotheque-entries row"},this.state.posts.map((function(t,o){return React.createElement(p,{className:e.hasPost(t)&&"vimeotheque-selected-post",post:t,onSelect:function(t){e.hasPost(t)?e.props.onRemove(t):e.props.onSelect(t)},selectText:e.selectText(t),key:t.id})}))),this.state.loading&&React.createElement("div",{className:"vimeotheque-loading"},React.createElement(P,null),k("Please wait, your video posts are loading...","codeflavors-vimeo-video-post-lite"))):React.createElement("div",{className:"vimeotheque-error"},this.state.error?this.state.error.message:k("We couldn't find any video posts, sorry.","codeflavors-vimeo-video-post-lite"))}}])&&h(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();T.defaultProps={postType:"vimeo-video",search:{query:"",category:!1},taxonomy:!1,page:1,perPage:10,selected:[],onSelect:function(e){},onRemove:function(e){},onRequestBegin:function(){},onRequestFinish:function(){},onRequestError:function(){}};const q=T;function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function A(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function N(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}function B(e,t,o){return t=D(t),function(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,I()?Reflect.construct(t,o||[],D(e).constructor):t.apply(e,o))}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}var M=wp.i18n.__,F=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),B(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,React.Component),o=t,(r=[{key:"render",value:function(){var e,t=this;return 0==this.props.posts.length&&(e=React.createElement("div",{className:"vimeotheque-error vimeotheque-post-list-container"},M("No individual videos selected! Once you select some videos they will appear in this section.","codeflavors-vimeo-video-post-lite"))),React.createElement("div",null,React.createElement("div",{className:"vimeotheque-entries row"},this.props.posts.map((function(e){return React.createElement(p,{post:e,onSelect:function(e){t.props.onSelect(e)},selectText:M("Remove","codeflavors-vimeo-video-post-lite"),key:e.id})}))),e)}}])&&A(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();F.defaultProps={posts:[],onSelect:function(e){}};const U=F;function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function z(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function W(e){var t=function(e,t){if("object"!=Q(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:t+""}function $(e,t,o){return t=G(t),function(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,V()?Reflect.construct(t,o||[],G(e).constructor):t.apply(e,o))}function V(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V=function(){return!!e})()}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}wp.apiFetch,wp.i18n.__;var X=wp.components,J=(X.Button,X.ButtonGroup,wp.compose.withState,function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=$(this,t,[e])).state={page:1,loading:!1,error:!1,postsCount:0,totalPages:0},o.handleLoadMore=o.handleLoadMore.bind(o),o.requestFinish=o.requestFinish.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(t,React.Component),o=t,(r=[{key:"isLoading",value:function(){return this.state.loading}},{key:"isError",value:function(){return this.state.error}},{key:"componentDidMount",value:function(){var e=this;jQuery(".vimeotheque-posts-list-modal").on("scroll",(function(){"selected"!=e.props.postType&&jQuery(".vimeotheque-posts-list-modal").scrollTop()+jQuery(".vimeotheque-posts-list-modal").innerHeight()>=jQuery(".vimeotheque-posts-list-modal")[0].scrollHeight-400&&(e.isLoading()||e.handleLoadMore())}))}},{key:"shouldComponentUpdate",value:function(e,t){return(0,f.isEqual)(this.props.search,e.search)?!(e.postType!=this.props.postType&&!this.isLoading()&&(this.setState({page:1,loading:"selected"!=e.postType,postsCount:0}),1)):(this.setState({page:1,loading:!0,postsCount:0}),!1)}},{key:"requestFinish",value:function(e){this.setState({loading:!1,error:!1,postsCount:e.postsCount,totalPages:e.totalPages}),this.props.onRequestFinish();var t=jQuery(".vimeotheque-posts-list-modal")[0].scrollHeight;jQuery(".vimeotheque-posts-list-modal").height()==t&&this.handleLoadMore()}},{key:"handleLoadMore",value:function(){!this.isLoading()&&!this.isError()&&this.state.postsCount&&this.state.totalPages>this.state.page&&this.setState({page:this.state.page+1,loading:!0})}},{key:"render",value:function(){var e=this;return"selected"==this.props.postType?React.createElement(U,{posts:this.props.filteredPosts,onSelect:this.props.onRemove}):React.createElement(q,{postType:this.props.postType,search:this.props.search,taxonomy:this.props.taxonomy,page:this.state.page,perPage:this.props.perPage,onSelect:this.props.onSelect,onRemove:this.props.onRemove,selected:this.props.filteredPosts,onRequestBegin:function(){e.setState({loading:!0}),e.props.onRequestBegin()},onRequestFinish:this.requestFinish,onRequestError:function(t){e.setState({loading:!1,error:t}),e.props.onRequestError}})}}])&&z(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}());J.defaultProps={postType:"vimeo-video",search:{query:"",category:!1},taxonomy:!1,perPage:30,onSelect:function(e){},onRemove:function(e){},onRequestFinish:function(){},onRequestBegin:function(){},onRequestError:function(){},filteredPosts:[],filteredCategories:[]};const K=J;function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},Z.apply(this,arguments)}function ee(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ce(r.key),r)}}function te(e,t,o){return t=re(t),function(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,oe()?Reflect.construct(t,o||[],re(e).constructor):t.apply(e,o))}function oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oe=function(){return!!e})()}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function ie(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function ae(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(o),!0).forEach((function(t){var r,n,i;r=e,n=t,i=o[t],(n=ce(n))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ie(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function ce(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}var se=wp.element,le=se.Component,ue=se.RawHTML,pe=wp.i18n,fe=pe.__,ye=pe.sprintf,de=wp.apiFetch,me=wp.url.addQueryArgs,ve=wp.components,he=ve.Placeholder,be=ve.Spinner,ge=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=te(this,t,[e])).state={response:null},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(t,e),o=t,r=[{key:"componentDidMount",value:function(){this.isStillMounted=!0,this.fetch(this.props),this.fetch=(0,f.debounce)(this.fetch,500)}},{key:"componentWillUnmount",value:function(){this.isStillMounted=!1}},{key:"componentDidUpdate",value:function(e){(0,f.isEqual)(e.attributes,this.props.attributes)||this.fetch(this.props)}},{key:"fetch",value:function(e){var t=this;if(this.isStillMounted){null!==this.state.response&&this.setState({response:null});var o=e.block,r=e.attributes,n=void 0===r?null:r,i=e.urlQueryArgs,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return me("/wp/v2/block-renderer/".concat(e),ae(ae({context:"edit"},null!==t?{attributes:t}:{}),o))}(o,n,void 0===i?{}:i),c=this.currentFetchRequest=de({path:a}).then((function(e){t.isStillMounted&&c===t.currentFetchRequest&&e&&t.setState({response:e.rendered})})).catch((function(e){t.isStillMounted&&c===t.currentFetchRequest&&t.setState({response:{error:!0,errorMsg:e.message}})}));return c}}},{key:"render",value:function(){var e=this.state.response,t=this.props,o=t.className,r=t.EmptyResponsePlaceholder,n=t.ErrorResponsePlaceholder,i=t.LoadingResponsePlaceholder;return""===e?React.createElement(r,Z({response:e},this.props)):e?e.error?React.createElement(n,Z({response:e},this.props)):React.createElement(ue,{key:"html",className:o},e):React.createElement(i,Z({response:e},this.props))}}],r&&ee(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}(le);ge.defaultProps={EmptyResponsePlaceholder:function(e){var t=e.className;return React.createElement(he,{className:t},fe("Block rendered as empty."))},ErrorResponsePlaceholder:function(e){var t=e.response,o=e.className,r=ye(fe("Error loading block: %s"),t.errorMsg);return React.createElement(he,{className:o},r)},LoadingResponsePlaceholder:function(e){var t=e.className;return React.createElement(he,{className:t},React.createElement(be,null))}};const we=ge;var Oe=wp.element,Se=(Oe.useState,Oe.useEffect,wp.components),Ee=Se.Placeholder,Pe=Se.Spinner,je=wp.i18n.__;const Re=function(e){var t=e.block,o=void 0===t?"":t,r=e.attributes,n=void 0===r?{}:r,i=(e.onComplete,e.isSelected),a=void 0!==i&&i;return React.createElement(React.Fragment,null,React.createElement(we,{block:o,attributes:n,LoadingResponsePlaceholder:function(){return React.createElement(Ee,null,je("Loading, please wait...","codeflavors-vimeo-video-post-lite"),React.createElement(Pe,null))}}),!a&&React.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}))};function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var Ce=function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,f.flatMap)(t,(function(t){return[{value:t.id,label:(0,f.repeat)("Â ",3*o)+(0,f.unescape)(t.name)}].concat(function(e){if(Array.isArray(e))return _e(e)}(r=e(t.children||[],o+1))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return _e(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_e(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var r}))};function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Te(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}var qe=(0,wp.data.withSelect)((function(e,t){var o=e("core/data").isResolving,r={per_page:100,orderby:"name",order:"asc",_fields:"id,name,parent,taxonomy",_locale:"user"};return function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(o),!0).forEach((function(t){var r,n,i,a;r=e,n=t,i=o[t],a=function(e,t){if("object"!=ke(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n),(n="symbol"==ke(a)?a:a+"")in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Te(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({terms:e("core").getEntityRecords("taxonomy",t.taxonomy,r),loading:o("core","getEntityRecords",["taxonomy",t.taxonomy,r])},t)})),xe=function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[];return t?(t.forEach((function(n){if(n.parent==o){var i={id:n.id,name:n.name},a=e(t,n.id);a&&(i.children=a),r.push(i)}})),r):r};function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function Be(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ie(r.key),r)}}function Ie(e){var t=function(e,t){if("object"!=Ae(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ae(t)?t:t+""}function De(e,t,o){return t=Me(t),function(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Le()?Reflect.construct(t,o||[],Me(e).constructor):t.apply(e,o))}function Le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Le=function(){return!!e})()}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}function Fe(e,t){return Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fe(e,t)}var Ue=wp.components,Qe=Ue.SelectControl,ze=(Ue.Spinner,Ue.BaseControl,wp.i18n.__),We=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=De(this,t,[e])).state={selectedId:e.selectedId},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fe(e,t)}(t,React.Component),o=t,(r=[{key:"shouldComponentUpdate",value:function(e,t){return e.loading||this.props.onLoad(e.terms),!0}},{key:"render",value:function(){var e,t,o=this;return e=this.props.loading?[{value:"",label:ze("Loading categories, please wait...","codeflavors-vimeo-video-post-lite")}]:(0,f.compact)([this.props.noOptionLabel&&{value:"",label:this.props.noOptionLabel}].concat(function(e){if(Array.isArray(e))return Ne(e)}(t=Ce(xe(this.props.terms)))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Ne(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),React.createElement(Qe,{disabled:this.props.loading,label:this.props.label,options:e,value:this.state.selectedId,onChange:function(e){o.setState({selectedId:e}),o.props.onChange(e)}})}}])&&Be(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();We.defaultProps={label:!1,noOptionLabel:!1,onChange:function(){},onLoad:function(){},selectedId:!1};var $e=qe(We);$e.defaultProps={taxonomy:"vimeo-videos"};const Ve=$e;function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function Xe(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Je(r.key),r)}}function Je(e){var t=function(e,t){if("object"!=Ge(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=Ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ge(t)?t:t+""}function Ke(e,t,o){return t=Ze(t),function(e,t){if(t&&("object"===Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ye()?Reflect.construct(t,o||[],Ze(e).constructor):t.apply(e,o))}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}function et(e,t){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},et(e,t)}var tt=wp.i18n.__,ot=wp.components,rt=ot.Spinner,nt=ot.TextControl,it=ot.Button,at=ot.ToggleControl,ct=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Ke(this,t,[e])).state={query:e.values.query,category:o.sanitizeCategory(e.values.category),optionSelected:!1,submitted:!1},o.isChecked=o.isChecked.bind(o),o.setCategories=o.setCategories.bind(o),o.getCategories=o.getCategories.bind(o),o.sanitizeCategory=o.sanitizeCategory.bind(o),o.categories={},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&et(e,t)}(t,React.Component),o=t,r=[{key:"shouldComponentUpdate",value:function(e,t){return this.props.taxonomy!=e.taxonomy&&this.setState({query:"",category:!1}),!0}},{key:"sanitizeCategory",value:function(e){var t=parseInt(e);return!isNaN(t)&&t}},{key:"isChecked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.state.category;return null!=(0,f.find)(this.props.selectedCategories,{id:this.sanitizeCategory(e)})}},{key:"setCategories",value:function(e){var t=this;e&&(e.forEach((function(e){(0,f.has)(t.categories,e.id)||(t.categories[e.id]=e)})),this.props.onCategoriesUpdate(this.categories))}},{key:"getCategories",value:function(e){var t=this,o=[];return e.forEach((function(e){o.push(t.categories[e])})),o}},{key:"render",value:function(){var e=this;return React.createElement(React.Fragment,null,React.createElement(nt,{label:tt("Search","codeflavors-vimeo-video-post-lite"),placeholder:tt("Enter your search query","codeflavors-vimeo-video-post-lite"),value:this.state.query,onChange:function(t){e.setState({query:t,submitted:!1})}}),this.props.taxonomy&&React.createElement(Ve,{label:tt("Category","codeflavors-vimeo-video-post-lite"),noOptionLabel:tt("Choose category","codeflavors-vimeo-video-post-lite"),taxonomy:this.props.taxonomy,selectedId:this.state.category,onChange:function(t){e.setState({category:e.sanitizeCategory(t),optionSelected:e.isChecked(t),submitted:!1})},onLoad:function(t){e.setCategories(t)}}),this.state.category&&this.state.submitted&&React.createElement(at,{label:tt("Select all videos from this category?","codeflavors-vimeo-video-post-lite"),help:tt("All videos belonging to this category will be used in playlist"),checked:this.state.optionSelected,onChange:function(){var t,o,r;e.isChecked()?(t=(0,f.filter)(e.props.selectedCategories,(function(t){return t.id!=e.state.category})),o=!1):(t=f.concat.apply(void 0,(r=e.props.selectedCategories,function(e){if(Array.isArray(e))return He(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return He(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?He(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([[e.categories[e.state.category]]])),o=!0),e.setState({optionSelected:o}),e.props.onCategorySelect(t)}}),React.createElement("div",{className:"vimeotheque-search-btn"},React.createElement(it,{isPrimary:!0,disabled:this.props.blocked,onClick:function(){e.setState({submitted:!0}),e.props.onSubmit({query:e.state.query,category:e.state.category})}},tt("Search","codeflavors-vimeo-video-post-lite")),this.props.blocked&&React.createElement(rt,null)))}}],r&&Xe(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();ct.defaultProps={blocked:!1,taxonomy:"vimeo-videos",selectedCategories:[],values:{query:"",category:!1},onSubmit:function(){},onCategorySelect:function(){},onCategoriesUpdate:function(){}};const st=ct;function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function pt(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ft(r.key),r)}}function ft(e){var t=function(e,t){if("object"!=lt(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lt(t)?t:t+""}function yt(e,t,o){return t=mt(t),function(e,t){if(t&&("object"===lt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,dt()?Reflect.construct(t,o||[],mt(e).constructor):t.apply(e,o))}function dt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dt=function(){return!!e})()}function mt(e){return mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mt(e)}function vt(e,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vt(e,t)}var ht=wp,bt=ht.i18n.__,gt=ht.components.CheckboxControl,wt=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=yt(this,t,[e])).handleChange=o.handleChange.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(t,React.Component),o=t,(r=[{key:"isChecked",value:function(e){return void 0!==(0,f.find)(this.props.categories,{id:e.value})}},{key:"handleChange",value:function(e){var t,o=(0,f.find)(this.props.categories,{id:e.value});void 0!==o?t=(0,f.without)(this.props.categories,o):(o=(0,f.find)(this.props.terms,{id:e.value}),t=(0,f.concat)(this.props.categories,o)),this.props.onChange(t)}},{key:"render",value:function(){var e,t=this,o=[];return this.props.loading||(o=this.props.loading?[]:(0,f.compact)(function(e){if(Array.isArray(e))return ut(e)}(e=Ce(xe(this.props.terms)))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ut(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?ut(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),React.createElement(React.Fragment,null,React.createElement("h4",null,this.props.title),this.props.loading?bt("Loading, please wait...","codeflavors-vimeo-video-post-lite"):o.length>0?React.createElement("ul",null,o.map((function(e){return React.createElement("li",{key:e.value},React.createElement(gt,{label:e.label,checked:t.isChecked(e),onChange:function(){t.handleChange(e)}}))}))):React.createElement("em",null,this.props.messageEmpty))}}])&&pt(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();wt.defaultProps={categories:[],loading:!1,title:bt("Categories","codeflavors-vimeo-video-post-lite"),onChange:function(){},terms:[],taxonomy:"category",messageEmpty:""};var Ot=qe(wt);Ot.defaultProps={taxonomy:"category"};const St=Ot;function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function Pt(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jt(r.key),r)}}function jt(e){var t=function(e,t){if("object"!=Et(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Et(t)?t:t+""}function Rt(e,t,o){return t=Ct(t),function(e,t){if(t&&("object"===Et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_t()?Reflect.construct(t,o||[],Ct(e).constructor):t.apply(e,o))}function _t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_t=function(){return!!e})()}function Ct(e){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ct(e)}function kt(e,t){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kt(e,t)}var Tt=wp.components.Button,qt=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Rt(this,t,[e])).handleChange=o.handleChange.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kt(e,t)}(t,React.Component),o=t,(r=[{key:"handleChange",value:function(e){this.props.onClick(this.props.postType)}},{key:"render",value:function(){return React.createElement(Tt,{className:this.props.className,onClick:this.handleChange,disabled:this.props.disabled},this.props.text)}}])&&Pt(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();qt.defaultProps={className:""};const xt=qt;function At(e){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(e)}function Nt(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bt(r.key),r)}}function Bt(e){var t=function(e,t){if("object"!=At(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==At(t)?t:t+""}function It(e,t,o){return t=Lt(t),function(e,t){if(t&&("object"===At(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Dt()?Reflect.construct(t,o||[],Lt(e).constructor):t.apply(e,o))}function Dt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dt=function(){return!!e})()}function Lt(e){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lt(e)}function Mt(e,t){return Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mt(e,t)}var Ft=wp.i18n.__,Ut=vmtq.postTypes,Qt=wp.components,zt=Qt.ButtonGroup,Wt=Qt.Button,$t=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=It(this,t,[e])).handlePostTypeChange=o.handlePostTypeChange.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mt(e,t)}(t,React.Component),o=t,r=[{key:"selectedClassName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=this.props.postType==e?"active":"inactive";return"".concat(o," ").concat(t)}},{key:"handlePostTypeChange",value:function(e){e==this.props.postType||this.props.disabled||this.props.onPostTypeChange(e)}},{key:"render",value:function(){var e=this;return React.createElement(zt,{className:"vimeotheque-post-type-filter"},(0,f.map)(Ut,(function(t){return React.createElement(xt,{key:t.post_type.name,className:e.selectedClassName(t.post_type.name),postType:t.post_type.name,text:t.post_type.labels.name,onClick:e.handlePostTypeChange,disabled:e.props.disabled})})),!this.props.hideSelected&&React.createElement(Wt,{isLink:!0,className:this.selectedClassName("selected","selected-posts"),disabled:this.props.disabled,onClick:function(){e.handlePostTypeChange("selected")}},this.props.textSelected))}}],r&&Nt(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();$t.defaultProps={postType:"vimeo-video",disabled:!1,textSelected:Ft("Selected","codeflavors-vimeo-video-post-lite"),hideSelected:!1,onPostTypeChange:function(){}};const Vt=$t;function Gt(e){return function(e){if(Array.isArray(e))return Jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,n,i,a,c=[],s=!0,l=!1;try{if(i=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;s=!1}else for(;!(s=(r=i.call(o)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,n=e}finally{try{if(!s&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(l)throw n}}return c}}(e,t)||Xt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){if(e){if("string"==typeof e)return Jt(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Jt(e,t):void 0}}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var Kt=wp,Yt=Kt.blocks.registerBlockType,Zt=Kt.i18n.__,eo=Kt.blockEditor,to=eo.InspectorControls,oo=eo.BlockControls,ro=Kt.components,no=ro.Placeholder,io=ro.Button,ao=(ro.ButtonGroup,ro.Modal),co=(ro.Panel,ro.PanelBody),so=ro.PanelRow,lo=ro.SelectControl,uo=ro.TextControl,po=ro.ToggleControl,fo=ro.Icon,yo=ro.Tooltip,mo=Kt.element,vo=mo.useState,ho=mo.useEffect,bo=(Kt.data.select,Kt.hooks),go=bo.applyFilters,wo=bo.doAction,Oo=vmtq,So=Oo.themes,Eo=Oo.order;Yt("vimeotheque/video-playlist",{title:Zt("Video playlist","codeflavors-vimeo-video-post-lite"),description:Zt("Display a playlist of Vimeo videos","codeflavors-vimeo-video-post-lite"),icon:"playlist-video",category:"widgets",example:{},supports:{align:!1,anchor:!1,html:!1,customClassName:!1},edit:function(e){var t,o=e.attributes,r=e.setAttributes,n=(e.className,Ht(vo(!1),2)),i=n[0],a=n[1],c=Ht(vo({query:"",category:!1}),2),s=c[0],l=c[1],u=Ht(vo(!0),2),p=u[0],y=u[1],d=Ht(vo("vimeo-videos"),2),m=d[0],v=d[1],h=Ht(vo("vimeo-video"),2),b=h[0],g=h[1],w=Ht(vo(!1),2),O=w[0],S=w[1],E=function(e){e.stopPropagation(),a(!0)},P=function(e){r({categories:e}),R(e)},j=function(e){for(var t=[],o=0;o<=e.length-1;o++)t.push(e[o].id);r({post_ids:t})},R=function(e){var t=[];e.forEach((function(e){t.push(e.id)})),r({cat_ids:t})},_=(0,f.map)(vmtq.postTypes,(function(e){if(e.taxonomy)return React.createElement(St,{key:e.taxonomy.name,taxonomy:e.taxonomy.name,title:e.taxonomy.labels.name,categories:o.categories,onChange:function(e){return P(e)},messageEmpty:Zt("None available.","codeflavors-vimeo-video-post-lite")})}));return ho((function(){j(o.videos),R(o.categories)}),[]),[React.createElement("div",{key:"vimeotheque-playlist-block"},(o.videos.length>0||o.categories.length>0)&&React.createElement(React.Fragment,null,React.createElement(oo,null,React.createElement("div",{className:"components-toolbar"},React.createElement(yo,{text:Zt("Edit playlist","codeflavors-vimeo-video-post-lite"),position:"top",placement:"top"},React.createElement(io,{onClick:E},React.createElement(fo,{icon:"edit"}))))),React.createElement(Re,{block:"vimeotheque/video-playlist",attributes:(t={theme:o.theme,layout:o.layout,show_excerpts:o.show_excerpts,use_original_thumbnails:o.use_original_thumbnails,order:o.order,aspect_ratio:o.aspect_ratio,align:o.align,width:o.width,volume:o.volume,title:o.title,byline:o.byline,portrait:o.portrait,playlist_loop:o.playlist_loop,post_ids:o.post_ids,cat_ids:o.cat_ids},go("vimeotheque.playlist.server-site-embed-params",t)),onComplete:function(){setTimeout((function(){(0,f.forEach)(window.vimeotheque.themes,(function(e){e()})),wo("vimeotheque.playlist.server-side-embed-loaded")}),200)},isSelected:e.isSelected})),0==o.videos.length&&0==o.categories.length&&React.createElement(no,{icon:"playlist-video",label:Zt("Video playlist","codeflavors-vimeo-video-post-lite")},React.createElement(io,{isPrimary:!0,onClick:E},Zt("Choose posts","codeflavors-vimeo-video-post-lite"))),i&&React.createElement(ao,{title:Zt("Choose posts","codeflavors-vimeo-video-post-lite"),onRequestClose:function(){return a(!1)},className:"vimeotheque-posts-list-modal"},React.createElement("div",{className:"wrapper"},React.createElement("div",{className:"vimeotheque-post-list-container"},React.createElement(Vt,{postType:b,disabled:O,textSelected:"".concat(Zt("Selected","codeflavors-vimeo-video-post-lite")," ").concat(o.videos.length,"\\").concat(o.cat_ids.length),onPostTypeChange:function(e){y("selected"!=e);var t="selected"!=e;t&&(t=!!vmtq.postTypes[e].taxonomy&&vmtq.postTypes[e].taxonomy.name),v(t),l({query:"",category:!1}),g(e)}}),React.createElement(K,{onSelect:function(e){var t=[].concat(Gt(o.videos),[e]);r({videos:t}),j(t)},onRemove:function(e){for(var t=o.videos.length-1;t>=0;t--)if(o.videos[t].id==e.id){o.videos.splice(t,1),r({videos:Gt(o.videos)}),j(o.videos);break}},filteredPosts:o.videos,filteredCategories:o.cat_ids,search:s,postType:b,taxonomy:m,onRequestBegin:function(){return S(!0)},onRequestFinish:function(){return S(!1)},onRequestError:function(){return S(!1)}})),React.createElement("nav",{className:"sidebar"},p?React.createElement(st,{blocked:O,taxonomy:m,selectedCategories:o.categories,values:s,onSubmit:function(e){return l(e)},onCategorySelect:function(e){return P(e)},onCategoriesUpdate:function(e){}}):React.createElement(React.Fragment,null,_))))),React.createElement(to,{key:"vimeotheque-playlist-controls"},React.createElement(co,{title:Zt("Theme","codeflavors-vimeo-video-post-lite")},React.createElement(so,null,React.createElement(lo,{label:Zt("Theme","codeflavors-vimeo-video-post-lite"),value:o.theme,options:So,onChange:function(e){r({theme:e})}})),React.createElement(so,null,React.createElement(uo,{label:Zt("Width","codeflavors-vimeo-video-post-lite"),type:"number",step:"5",value:o.width,min:"200",onChange:function(e){r({width:e})}})),React.createElement(so,null,React.createElement(lo,{label:Zt("Aspect ratio","codeflavors-vimeo-video-post-lite"),value:o.aspect_ratio,options:[{label:"4x3",value:"4x3"},{label:"16x9",value:"16x9"},{label:"2.35x1",value:"2.35x1"}],onChange:function(e){r({aspect_ratio:e})}})),React.createElement(so,null,React.createElement(lo,{label:Zt("Align","codeflavors-vimeo-video-post-lite"),value:o.align,options:[{label:"left",value:"align-left"},{label:"center",value:"align-center"},{label:"right",value:"align-right"}],onChange:function(e){r({align:e})}}))),React.createElement(co,{title:Zt("Video posts","codeflavors-vimeo-video-post-lite")},React.createElement(so,null,React.createElement(lo,{label:Zt("Posts order","codeflavors-vimeo-video-post-lite"),value:o.order,options:Eo,onChange:function(e){r({order:e})}}))),React.createElement(co,{title:Zt("Embed options","codeflavors-vimeo-video-post-lite"),initialOpen:!0},React.createElement(so,null,React.createElement(po,{label:Zt("Show title","codeflavors-vimeo-video-post-lite"),checked:o.title,onChange:function(){r({title:!o.title})}})),React.createElement(so,null,React.createElement(po,{label:Zt("Show byline","codeflavors-vimeo-video-post-lite"),checked:o.byline,onChange:function(){r({byline:!o.byline})}})),React.createElement(so,null,React.createElement(po,{label:Zt("Show portrait","codeflavors-vimeo-video-post-lite"),checked:o.portrait,onChange:function(){r({portrait:!o.portrait})}})),React.createElement(so,null,React.createElement(po,{label:Zt("Loop playlist","codeflavors-vimeo-video-post-lite"),checked:o.playlist_loop,onChange:function(){r({playlist_loop:!o.playlist_loop})}})),React.createElement(so,null,React.createElement(uo,{label:Zt("Volume","codeflavors-vimeo-video-post-lite"),help:Zt("Will work only for JS embeds","codeflavors-vimeo-video-post-lite"),type:"number",step:"1",value:o.volume,min:"0",max:"100",onChange:function(e){var t=e>=0&&e<=100?e:o.volume;r({volume:t})}}))))]},save:function(e){return null}})})();