(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(t){var o=function(t,o){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(o)?o:o+""}function r(t,o,r){return o=i(o),function(t,o){if(o&&("object"===e(o)||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,n()?Reflect.construct(o,r||[],i(t).constructor):o.apply(t,r))}function n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n=function(){return!!e})()}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}wp.i18n.__;var c=wp.date.dateI18n,s=wp.components.Button,l=vmtq.noImageUrl,u=function(e){function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r(this,o,[e])).post=t.props.post,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(o,React.Component),n=o,(i=[{key:"getImageUrl",value:function(){return void 0!==this.post.vimeo_video.thumbnail?this.post.vimeo_video.thumbnail:l}},{key:"render",value:function(){var e=this;return React.createElement("div",{className:"col-xs-6  col-sm-4 col-md-3 col-lg-2 grid-element ".concat(this.props.className)},React.createElement("div",{className:"cvm-video"},React.createElement("div",{className:"cvm-thumbnail"},null!=this.post.vimeo_video&&React.createElement("div",null,React.createElement("img",{src:this.getImageUrl()}),React.createElement("span",{className:"duration"},this.post.vimeo_video._duration))),React.createElement("div",{className:"details"},React.createElement("h4",null,jQuery("<textarea />").html(this.post.title.rendered).text()),React.createElement("div",{className:"meta"},React.createElement("span",{className:"publish-date"},c("M d Y",this.post.date))),React.createElement("div",{className:"actions"},React.createElement(s,{className:"select-button",isLink:!0,onClick:function(){e.props.onSelect(e.post)}},this.props.selectText)))))}}])&&t(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}();u.defaultProps={post:null,selectText:"Select",onSelect:function(e){},className:""};const p=u,f=lodash;function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function d(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return v(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function b(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}function g(e,t,o){return t=O(t),function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,o||[],O(e).constructor):t.apply(e,o))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}wp.data.registerStore("vimeotheque-post-store",{reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"ADD_POSTS"==t.type?e.concat([t.payload]):e},selectors:{getPosts:function(e,t){return(0,f.find)(e,{url:t})}},actions:{addPosts:function(e,t,o,r){return{type:"ADD_POSTS",payload:{url:e,posts:t,total:o,pages:r}}}}});var P=wp.apiFetch,j=wp.components.Spinner,E=vmtq.postTypes,R=wp.data,_=R.select,C=R.dispatch,T=wp.i18n.__,k=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=g(this,t,[e])).state={posts:[],loading:!1,error:!1,totalEntries:0,totalPages:0},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,React.Component),o=t,(r=[{key:"makeRequest",value:function(){var e=this;this.setState({loading:!0}),this.props.onRequestBegin();var t={post_type:this.props.postType,page:this.props.page,search:this.props.search.query,per_page:this.props.perPage,orderby:"date",order:"desc",vimeothequeMetaKey:"true"};if(this.props.search.category){var o="category"==this.props.taxonomy?"categories":this.props.taxonomy;t[o]=this.props.search.category}var r="".concat(E[this.props.postType].post_type_endpoint,"?")+(0,f.map)((0,f.keys)(t),(function(e){return"".concat(e,"=").concat(t[e])})).join("&"),n=_("vimeotheque-post-store").getPosts(r);if(null!=n){var i=[].concat(d(this.state.posts),d(n.posts));this.setState({totalEntries:n.total,totalPages:n.pages,loading:!1,posts:i}),this.props.onRequestFinish({postsCount:i.length,totalEntries:n.total,totalPages:n.pages})}else P({path:r,method:"GET",parse:!1}).then((function(t){return e.setState({totalEntries:t.headers.get("X-WP-Total"),totalPages:t.headers.get("X-WP-TotalPages")}),t.json()})).then((function(t){var o=[].concat(d(e.state.posts),d(t));e.setState({posts:o,loading:!1}),e.props.onRequestFinish({postsCount:o.length,totalEntries:e.state.totalEntries,totalPages:e.state.totalPages}),C("vimeotheque-post-store").addPosts(r,t,e.state.totalEntries,e.state.totalPages)})).catch((function(t){e.setState({error:t,loading:!1}),e.props.onRequestError(t)}))}},{key:"componentDidMount",value:function(){this.makeRequest()}},{key:"componentDidUpdate",value:function(e){this.props.postType!=e.postType&&"selected"!=e.postType||this.props.search!=e.search?this.setState({posts:[],loading:!1,error:!1,totalEntries:0,totalPages:0},this.makeRequest):this.props.page!=e.page&&!this.state.error&&this.props.page<=this.state.totalPages&&this.makeRequest()}},{key:"hasPost",value:function(e){var t,o=function(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=m(e))){o&&(e=o);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==o.return||o.return()}finally{if(c)throw i}}}}(this.props.selected);try{for(o.s();!(t=o.n()).done;)if(t.value.id==e.id)return!0}catch(e){o.e(e)}finally{o.f()}}},{key:"selectText",value:function(e){return this.hasPost(e)?T("Remove video","codeflavors-vimeo-video-post-lite"):T("Select video","codeflavors-vimeo-video-post-lite")}},{key:"render",value:function(){var e=this;return this.state.loading||0!=this.state.posts.length?React.createElement("div",{className:"vimeotheque-entries-container"},React.createElement("div",{className:"vimeotheque-entries row"},this.state.posts.map((function(t,o){return React.createElement(p,{className:e.hasPost(t)&&"vimeotheque-selected-post",post:t,onSelect:function(t){e.hasPost(t)?e.props.onRemove(t):e.props.onSelect(t)},selectText:e.selectText(t),key:t.id})}))),this.state.loading&&React.createElement("div",{className:"vimeotheque-loading"},React.createElement(j,null),T("Please wait, your video posts are loading...","codeflavors-vimeo-video-post-lite"))):React.createElement("div",{className:"vimeotheque-error"},this.state.error?this.state.error.message:T("We couldn't find any video posts, sorry.","codeflavors-vimeo-video-post-lite"))}}])&&b(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();k.defaultProps={postType:"vimeo-video",search:{query:"",category:!1},taxonomy:!1,page:1,perPage:10,selected:[],onSelect:function(e){},onRemove:function(e){},onRequestBegin:function(){},onRequestFinish:function(){},onRequestError:function(){}};const q=k;function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function A(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function N(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}function B(e,t,o){return t=D(t),function(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,I()?Reflect.construct(t,o||[],D(e).constructor):t.apply(e,o))}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}var M=wp.i18n.__,F=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),B(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,React.Component),o=t,(r=[{key:"render",value:function(){var e,t=this;return 0==this.props.posts.length&&(e=React.createElement("div",{className:"vimeotheque-error vimeotheque-post-list-container"},M("No individual videos selected! Once you select some videos they will appear in this section.","codeflavors-vimeo-video-post-lite"))),React.createElement("div",null,React.createElement("div",{className:"vimeotheque-entries row"},this.props.posts.map((function(e){return React.createElement(p,{post:e,onSelect:function(e){t.props.onSelect(e)},selectText:M("Remove","codeflavors-vimeo-video-post-lite"),key:e.id})}))),e)}}])&&A(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();F.defaultProps={posts:[],onSelect:function(e){}};const U=F;function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function z(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function W(e){var t=function(e,t){if("object"!=Q(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:t+""}function $(e,t,o){return t=G(t),function(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,H()?Reflect.construct(t,o||[],G(e).constructor):t.apply(e,o))}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H=function(){return!!e})()}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}wp.apiFetch,wp.i18n.__;var X=wp.components,J=(X.Button,X.ButtonGroup,wp.compose.withState,function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=$(this,t,[e])).state={page:1,loading:!1,error:!1,postsCount:0,totalPages:0},o.handleLoadMore=o.handleLoadMore.bind(o),o.requestFinish=o.requestFinish.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(t,React.Component),o=t,(r=[{key:"isLoading",value:function(){return this.state.loading}},{key:"isError",value:function(){return this.state.error}},{key:"componentDidMount",value:function(){var e=this;jQuery(".vimeotheque-posts-list-modal").on("scroll",(function(){"selected"!=e.props.postType&&jQuery(".vimeotheque-posts-list-modal").scrollTop()+jQuery(".vimeotheque-posts-list-modal").innerHeight()>=jQuery(".vimeotheque-posts-list-modal")[0].scrollHeight-400&&(e.isLoading()||e.handleLoadMore())}))}},{key:"shouldComponentUpdate",value:function(e,t){return(0,f.isEqual)(this.props.search,e.search)?!(e.postType!=this.props.postType&&!this.isLoading()&&(this.setState({page:1,loading:"selected"!=e.postType,postsCount:0}),1)):(this.setState({page:1,loading:!0,postsCount:0}),!1)}},{key:"requestFinish",value:function(e){this.setState({loading:!1,error:!1,postsCount:e.postsCount,totalPages:e.totalPages}),this.props.onRequestFinish();var t=jQuery(".vimeotheque-posts-list-modal")[0].scrollHeight;jQuery(".vimeotheque-posts-list-modal").height()==t&&this.handleLoadMore()}},{key:"handleLoadMore",value:function(){!this.isLoading()&&!this.isError()&&this.state.postsCount&&this.state.totalPages>this.state.page&&this.setState({page:this.state.page+1,loading:!0})}},{key:"render",value:function(){var e=this;return"selected"==this.props.postType?React.createElement(U,{posts:this.props.filteredPosts,onSelect:this.props.onRemove}):React.createElement(q,{postType:this.props.postType,search:this.props.search,taxonomy:this.props.taxonomy,page:this.state.page,perPage:this.props.perPage,onSelect:this.props.onSelect,onRemove:this.props.onRemove,selected:this.props.filteredPosts,onRequestBegin:function(){e.setState({loading:!0}),e.props.onRequestBegin()},onRequestFinish:this.requestFinish,onRequestError:function(t){e.setState({loading:!1,error:t}),e.props.onRequestError}})}}])&&z(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}());J.defaultProps={postType:"vimeo-video",search:{query:"",category:!1},taxonomy:!1,perPage:30,onSelect:function(e){},onRemove:function(e){},onRequestFinish:function(){},onRequestBegin:function(){},onRequestError:function(){},filteredPosts:[],filteredCategories:[]};const K=J;function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var Z=function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,f.flatMap)(t,(function(t){return[{value:t.id,label:(0,f.repeat)("Â ",3*o)+(0,f.unescape)(t.name)}].concat(function(e){if(Array.isArray(e))return Y(e)}(r=e(t.children||[],o+1))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Y(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var r}))};function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}var oe=(0,wp.data.withSelect)((function(e,t){var o=e("core/data").isResolving,r={per_page:100,orderby:"name",order:"asc",_fields:"id,name,parent,taxonomy",_locale:"user"};return function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?te(Object(o),!0).forEach((function(t){var r,n,i,a;r=e,n=t,i=o[t],a=function(e,t){if("object"!=ee(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n),(n="symbol"==ee(a)?a:a+"")in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):te(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({terms:e("core").getEntityRecords("taxonomy",t.taxonomy,r),loading:o("core","getEntityRecords",["taxonomy",t.taxonomy,r])},t)})),re=function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[];return t?(t.forEach((function(n){if(n.parent==o){var i={id:n.id,name:n.name},a=e(t,n.id);a&&(i.children=a),r.push(i)}})),r):r};function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function ae(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ce(r.key),r)}}function ce(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}function se(e,t,o){return t=ue(t),function(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,le()?Reflect.construct(t,o||[],ue(e).constructor):t.apply(e,o))}function le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(le=function(){return!!e})()}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}var fe=wp.components,ye=fe.SelectControl,de=(fe.Spinner,fe.BaseControl,wp.i18n.__),me=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=se(this,t,[e])).state={selectedId:e.selectedId},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(t,React.Component),o=t,(r=[{key:"shouldComponentUpdate",value:function(e,t){return e.loading||this.props.onLoad(e.terms),!0}},{key:"render",value:function(){var e,t,o=this;return e=this.props.loading?[{value:"",label:de("Loading categories, please wait...","codeflavors-vimeo-video-post-lite")}]:(0,f.compact)([this.props.noOptionLabel&&{value:"",label:this.props.noOptionLabel}].concat(function(e){if(Array.isArray(e))return ie(e)}(t=Z(re(this.props.terms)))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?ie(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),React.createElement(ye,{disabled:this.props.loading,label:this.props.label,options:e,value:this.state.selectedId,onChange:function(e){o.setState({selectedId:e}),o.props.onChange(e)}})}}])&&ae(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();me.defaultProps={label:!1,noOptionLabel:!1,onChange:function(){},onLoad:function(){},selectedId:!1};var ve=oe(me);ve.defaultProps={taxonomy:"vimeo-videos"};const be=ve;function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function we(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Oe(r.key),r)}}function Oe(e){var t=function(e,t){if("object"!=he(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==he(t)?t:t+""}function Se(e,t,o){return t=je(t),function(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Pe()?Reflect.construct(t,o||[],je(e).constructor):t.apply(e,o))}function Pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pe=function(){return!!e})()}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}function Ee(e,t){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ee(e,t)}var Re=wp.i18n.__,_e=wp.components,Ce=_e.Spinner,Te=_e.TextControl,ke=_e.Button,qe=_e.ToggleControl,xe=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Se(this,t,[e])).state={query:e.values.query,category:o.sanitizeCategory(e.values.category),optionSelected:!1,submitted:!1},o.isChecked=o.isChecked.bind(o),o.setCategories=o.setCategories.bind(o),o.getCategories=o.getCategories.bind(o),o.sanitizeCategory=o.sanitizeCategory.bind(o),o.categories={},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(t,React.Component),o=t,r=[{key:"shouldComponentUpdate",value:function(e,t){return this.props.taxonomy!=e.taxonomy&&this.setState({query:"",category:!1}),!0}},{key:"sanitizeCategory",value:function(e){var t=parseInt(e);return!isNaN(t)&&t}},{key:"isChecked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.state.category;return null!=(0,f.find)(this.props.selectedCategories,{id:this.sanitizeCategory(e)})}},{key:"setCategories",value:function(e){var t=this;e&&(e.forEach((function(e){(0,f.has)(t.categories,e.id)||(t.categories[e.id]=e)})),this.props.onCategoriesUpdate(this.categories))}},{key:"getCategories",value:function(e){var t=this,o=[];return e.forEach((function(e){o.push(t.categories[e])})),o}},{key:"render",value:function(){var e=this;return React.createElement(React.Fragment,null,React.createElement(Te,{label:Re("Search","codeflavors-vimeo-video-post-lite"),placeholder:Re("Enter your search query","codeflavors-vimeo-video-post-lite"),value:this.state.query,onChange:function(t){e.setState({query:t,submitted:!1})}}),this.props.taxonomy&&React.createElement(be,{label:Re("Category","codeflavors-vimeo-video-post-lite"),noOptionLabel:Re("Choose category","codeflavors-vimeo-video-post-lite"),taxonomy:this.props.taxonomy,selectedId:this.state.category,onChange:function(t){e.setState({category:e.sanitizeCategory(t),optionSelected:e.isChecked(t),submitted:!1})},onLoad:function(t){e.setCategories(t)}}),this.state.category&&this.state.submitted&&React.createElement(qe,{label:Re("Select all videos from this category?","codeflavors-vimeo-video-post-lite"),help:Re("All videos belonging to this category will be used in playlist"),checked:this.state.optionSelected,onChange:function(){var t,o,r;e.isChecked()?(t=(0,f.filter)(e.props.selectedCategories,(function(t){return t.id!=e.state.category})),o=!1):(t=f.concat.apply(void 0,(r=e.props.selectedCategories,function(e){if(Array.isArray(e))return ge(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return ge(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?ge(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([[e.categories[e.state.category]]])),o=!0),e.setState({optionSelected:o}),e.props.onCategorySelect(t)}}),React.createElement("div",{className:"vimeotheque-search-btn"},React.createElement(ke,{isPrimary:!0,disabled:this.props.blocked,onClick:function(){e.setState({submitted:!0}),e.props.onSubmit({query:e.state.query,category:e.state.category})}},Re("Search","codeflavors-vimeo-video-post-lite")),this.props.blocked&&React.createElement(Ce,null)))}}],r&&we(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();xe.defaultProps={blocked:!1,taxonomy:"vimeo-videos",selectedCategories:[],values:{query:"",category:!1},onSubmit:function(){},onCategorySelect:function(){},onCategoriesUpdate:function(){}};const Ae=xe;function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Be(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ie(r.key),r)}}function Ie(e){var t=function(e,t){if("object"!=Ne(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ne(t)?t:t+""}function De(e,t,o){return t=Me(t),function(e,t){if(t&&("object"===Ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Le()?Reflect.construct(t,o||[],Me(e).constructor):t.apply(e,o))}function Le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Le=function(){return!!e})()}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}function Fe(e,t){return Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fe(e,t)}var Ue=wp.components.Button,Qe=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=De(this,t,[e])).handleChange=o.handleChange.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fe(e,t)}(t,React.Component),o=t,(r=[{key:"handleChange",value:function(e){this.props.onClick(this.props.postType)}},{key:"render",value:function(){return React.createElement(Ue,{className:this.props.className,onClick:this.handleChange,disabled:this.props.disabled},this.props.text)}}])&&Be(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();Qe.defaultProps={className:""};const ze=Qe;function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function $e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,He(r.key),r)}}function He(e){var t=function(e,t){if("object"!=We(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=We(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==We(t)?t:t+""}function Ge(e,t,o){return t=Xe(t),function(e,t){if(t&&("object"===We(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ve()?Reflect.construct(t,o||[],Xe(e).constructor):t.apply(e,o))}function Ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ve=function(){return!!e})()}function Xe(e){return Xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xe(e)}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Je(e,t)}var Ke=wp.i18n.__,Ye=vmtq.postTypes,Ze=wp.components,et=Ze.ButtonGroup,tt=Ze.Button,ot=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Ge(this,t,[e])).handlePostTypeChange=o.handlePostTypeChange.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}(t,React.Component),o=t,r=[{key:"selectedClassName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=this.props.postType==e?"active":"inactive";return"".concat(o," ").concat(t)}},{key:"handlePostTypeChange",value:function(e){e==this.props.postType||this.props.disabled||this.props.onPostTypeChange(e)}},{key:"render",value:function(){var e=this;return React.createElement(et,{className:"vimeotheque-post-type-filter"},(0,f.map)(Ye,(function(t){return React.createElement(ze,{key:t.post_type.name,className:e.selectedClassName(t.post_type.name),postType:t.post_type.name,text:t.post_type.labels.name,onClick:e.handlePostTypeChange,disabled:e.props.disabled})})),!this.props.hideSelected&&React.createElement(tt,{isLink:!0,className:this.selectedClassName("selected","selected-posts"),disabled:this.props.disabled,onClick:function(){e.handlePostTypeChange("selected")}},this.props.textSelected))}}],r&&$e(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();ot.defaultProps={postType:"vimeo-video",disabled:!1,textSelected:Ke("Selected","codeflavors-vimeo-video-post-lite"),hideSelected:!1,onPostTypeChange:function(){}};const rt=ot;function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},it.apply(this,arguments)}function at(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yt(r.key),r)}}function ct(e,t,o){return t=lt(t),function(e,t){if(t&&("object"===nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,st()?Reflect.construct(t,o||[],lt(e).constructor):t.apply(e,o))}function st(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(st=function(){return!!e})()}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}function ut(e,t){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ut(e,t)}function pt(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function ft(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(o),!0).forEach((function(t){var r,n,i;r=e,n=t,i=o[t],(n=yt(n))in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):pt(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function yt(e){var t=function(e,t){if("object"!=nt(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nt(t)?t:t+""}var dt=wp.element,mt=dt.Component,vt=dt.RawHTML,bt=wp.i18n,ht=bt.__,gt=bt.sprintf,wt=wp.apiFetch,Ot=wp.url.addQueryArgs,St=wp.components,Pt=St.Placeholder,jt=St.Spinner,Et=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ct(this,t,[e])).state={response:null},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}(t,e),o=t,r=[{key:"componentDidMount",value:function(){this.isStillMounted=!0,this.fetch(this.props),this.fetch=(0,f.debounce)(this.fetch,500)}},{key:"componentWillUnmount",value:function(){this.isStillMounted=!1}},{key:"componentDidUpdate",value:function(e){(0,f.isEqual)(e.attributes,this.props.attributes)||this.fetch(this.props)}},{key:"fetch",value:function(e){var t=this;if(this.isStillMounted){null!==this.state.response&&this.setState({response:null});var o=e.block,r=e.attributes,n=void 0===r?null:r,i=e.urlQueryArgs,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ot("/wp/v2/block-renderer/".concat(e),ft(ft({context:"edit"},null!==t?{attributes:t}:{}),o))}(o,n,void 0===i?{}:i),c=this.currentFetchRequest=wt({path:a}).then((function(e){t.isStillMounted&&c===t.currentFetchRequest&&e&&t.setState({response:e.rendered})})).catch((function(e){t.isStillMounted&&c===t.currentFetchRequest&&t.setState({response:{error:!0,errorMsg:e.message}})}));return c}}},{key:"render",value:function(){var e=this.state.response,t=this.props,o=t.className,r=t.EmptyResponsePlaceholder,n=t.ErrorResponsePlaceholder,i=t.LoadingResponsePlaceholder;return""===e?React.createElement(r,it({response:e},this.props)):e?e.error?React.createElement(n,it({response:e},this.props)):React.createElement(vt,{key:"html",className:o},e):React.createElement(i,it({response:e},this.props))}}],r&&at(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}(mt);Et.defaultProps={EmptyResponsePlaceholder:function(e){var t=e.className;return React.createElement(Pt,{className:t},ht("Block rendered as empty."))},ErrorResponsePlaceholder:function(e){var t=e.response,o=e.className,r=gt(ht("Error loading block: %s"),t.errorMsg);return React.createElement(Pt,{className:o},r)},LoadingResponsePlaceholder:function(e){var t=e.className;return React.createElement(Pt,{className:t},React.createElement(jt,null))}};const Rt=Et;var _t=wp.element,Ct=(_t.useState,_t.useEffect,wp.components),Tt=Ct.Placeholder,kt=Ct.Spinner,qt=wp.i18n.__;const xt=function(e){var t=e.block,o=void 0===t?"":t,r=e.attributes,n=void 0===r?{}:r,i=(e.onComplete,e.isSelected),a=void 0!==i&&i;return React.createElement(React.Fragment,null,React.createElement(Rt,{block:o,attributes:n,LoadingResponsePlaceholder:function(){return React.createElement(Tt,null,qt("Loading, please wait...","codeflavors-vimeo-video-post-lite"),React.createElement(kt,null))}}),!a&&React.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}))};function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,n,i,a,c=[],s=!0,l=!1;try{if(i=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;s=!1}else for(;!(s=(r=i.call(o)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,n=e}finally{try{if(!s&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(l)throw n}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Nt(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Nt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var Bt=wp,It=Bt.blocks.registerBlockType,Dt=Bt.i18n.__,Lt=Bt.components,Mt=Lt.Button,Ft=Lt.Placeholder,Ut=Lt.Modal,Qt=Lt.Icon,zt=Lt.Tooltip,Wt=(Lt.Panel,Lt.PanelBody),$t=Lt.PanelRow,Ht=(Lt.Dropdown,Lt.TextControl),Gt=Lt.SelectControl,Vt=Lt.ToggleControl,Xt=Bt.blockEditor,Jt=Xt.InspectorControls,Kt=Xt.BlockControls,Yt=Bt.element.useState;It("vimeotheque/video",{title:Dt("Vimeotheque video","codeflavors-vimeo-video-post-lite"),description:Dt("Display embed of a video post","codeflavors-vimeo-video-post-lite"),icon:"media-video",category:"embed",example:{},supports:{align:!1,anchor:!1,html:!1},edit:function(e){var t=e.attributes,o=e.setAttributes,r=(e.className,At(Yt(!1),2)),n=r[0],i=r[1],a=At(Yt(!1),2),c=a[0],s=a[1],l=At(Yt(!1),2),u=l[0],p=l[1],f=At(Yt({query:"",category:!1}),2),y=f[0],d=f[1],m=At(Yt("vimeo-videos"),2),v=m[0],b=m[1],h=At(Yt("vimeo-video"),2),g=h[0],w=h[1],O=At(Yt([]),2),S=O[0],P=O[1],j=function(e){e.stopPropagation(),s(!0)};return n||(t.id&&P(t.post),i(!0)),[React.createElement("div",{key:"vimeotheque-video-embed-block"},t.id?React.createElement(React.Fragment,null,React.createElement(Kt,null,React.createElement("div",{className:"components-toolbar"},React.createElement(zt,{text:Dt("Change video","codeflavors-vimeo-video-post-lite"),position:"top",placement:"top"},React.createElement(Mt,{onClick:j},React.createElement(Qt,{icon:"edit"}))))),React.createElement(xt,{block:"vimeotheque/video",attributes:{id:t.id,volume:t.volume,width:t.width,aspect_ratio:t.aspect_ratio,loop:t.loop,autoplay:t.autoplay,video_align:t.video_align},onComplete:function(){setTimeout((function(){jQuery("div.vimeotheque-player").VimeoPlayer()}),200)},isSelected:e.isSelected})):React.createElement(Ft,{icon:"media-video",label:Dt("Embed a video post","codeflavors-vimeo-video-post-lite")},React.createElement(Mt,{isPrimary:!0,onClick:j},Dt("Choose video post","codeflavors-vimeo-video-post-lite"))),c&&React.createElement(Ut,{title:Dt("Choose post","codeflavors-vimeo-video-post-lite"),onRequestClose:function(){return s(!1)},className:"vimeotheque-posts-list-modal"},React.createElement("div",{className:"wrapper"},React.createElement("div",{className:"vimeotheque-post-list-container"},React.createElement(rt,{postType:g,disabled:u,hideSelected:0==t.id,onPostTypeChange:function(e){d({query:"",category:!1}),w(e);var t="selected"!=e;t&&(t=!!vmtq.postTypes[e].taxonomy&&vmtq.postTypes[e].taxonomy.name),b(t)}}),React.createElement(K,{onSelect:function(e){o({id:e.id,post:[e]}),P([e])},onRemove:function(e){o({id:0,post:[]}),P([])},filteredPosts:S,search:y,postType:g,taxonomy:v,onRequestBegin:function(){p(!0)},onRequestFinish:function(){p(!1)},onRequestError:function(){p(!1)}})),"selected"!=g&&React.createElement("nav",{className:"sidebar"},React.createElement(Ae,{blocked:u,taxonomy:v,values:y,onSubmit:function(e){return d(e)}}))))),React.createElement(Jt,{key:"vimeotheque-video-embed-controls"},React.createElement(Wt,{title:Dt("Embed options","codeflavors-vimeo-video-post-lite"),initialOpen:!0},React.createElement($t,null,React.createElement(Vt,{label:Dt("Loop video","codeflavors-vimeo-video-post-lite"),checked:t.loop,onChange:function(){o({loop:!t.loop})}})),React.createElement($t,null,React.createElement(Vt,{label:Dt("Autoplay video","codeflavors-vimeo-video-post-lite"),help:Dt("This feature won't work on all browsers.","codeflavors-vimeo-video-post-lite"),checked:t.autoplay,onChange:function(){o({autoplay:!t.autoplay})}})),React.createElement($t,null,React.createElement(Ht,{label:Dt("Volume","codeflavors-vimeo-video-post-lite"),help:Dt("Will work only for JS embeds","codeflavors-vimeo-video-post-lite"),type:"number",step:"1",value:t.volume,min:"0",max:"100",onChange:function(e){o({volume:e>=0&&e<=100?e:t.volume})}}))),React.createElement(Wt,{title:Dt("Embed size","codeflavors-vimeo-video-post-lite"),initialOpen:!1},React.createElement($t,null,React.createElement(Ht,{label:Dt("Width","codeflavors-vimeo-video-post-lite"),type:"number",step:"5",value:t.width,min:"200",onChange:function(e){o({width:!e||e<200?200:e}),vimeotheque.resizeAll()}})),React.createElement($t,null,React.createElement(Gt,{label:Dt("Aspect ratio","codeflavors-vimeo-video-post-lite"),value:t.aspect_ratio,options:[{label:"4x3",value:"4x3"},{label:"16x9",value:"16x9"},{label:"2.35x1",value:"2.35x1"}],onChange:function(e){o({aspect_ratio:e}),setTimeout(vimeotheque.resizeAll,200)}})),React.createElement($t,null,React.createElement(Gt,{label:Dt("Align","codeflavors-vimeo-video-post-lite"),value:t.video_align,options:[{label:"left",value:"align-left"},{label:"center",value:"align-center"},{label:"right",value:"align-right"}],onChange:function(e){o({video_align:e})}}))))]},save:function(e){return null}})})();