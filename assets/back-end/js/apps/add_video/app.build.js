(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var t=wp,r=t.components,n=r.TextControl,o=r.Button,a=t.element.useState,i=t.i18n.__;const l=function(t){var r,l,c=t.onSubmit,u=void 0===c?function(){}:c,s=(r=a(""),l=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(r,l)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(r,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=s[0],f=s[1];return React.createElement("div",{className:"vimeotheque-search-form"},React.createElement(n,{label:"".concat(i("Insert Vimeo video URL or video ID","codeflavors-vimeo-video-post-lite")," : "),help:i("","codeflavors-vimeo-video-post-lite"),value:m,onChange:function(e){f(e)}}),React.createElement(o,{isPrimary:!0,onClick:function(){u(m)}},i("Search","codeflavors-vimeo-video-post-lite")))};function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){var n,o,a,i;n=e,o=t,a=r[t],i=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==c(i)?i:i+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}wp.data.withSelect;var d=wp.apiFetch,p=wp.element,y=p.useState,b=p.useEffect,h=wp,g=h.components,E=g.Icon,S=g.Button,R=h.hooks.applyFilters,w=h.i18n.__;const O=function(e){var t=e.data,r=void 0===t?{}:t,n=e.onClick,o=void 0===n?function(){}:n,a=e.onCancel,i=void 0===a?function(){}:a,l=R("vimeotheque.single-import.params",{});return React.createElement("div",{className:"vimeotheque-video"},React.createElement("div",{className:"image"},React.createElement("img",{src:r.thumbnails[2],alt:r.title}),React.createElement("span",{className:"duration"},r._duration),"public"!=r.privacy&&React.createElement(E,{icon:"lock"})),React.createElement("div",{className:"video"},React.createElement("h1",null,r.title),React.createElement("div",{className:"meta"},React.createElement("span",{className:"published"},r._published),React.createElement("span",{className:"by"},"by ".concat(r.uploader))),React.createElement(S,{isPrimary:!0,onClick:function(){o(r,l)}},w("Import video","codeflavors-vimeo-video-post-lite")),React.createElement(S,{isSecondary:!0,onClick:i},w("Cancel","codeflavors-vimeo-video-post-lite")),R("vimeotheque.single-import.import-actions")))};function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A,C=wp,I=C.components,P=I.Spinner,q=I.Notice,k=I.Placeholder,N=C.element,_=N.useState,T=N.useEffect,M=C.i18n.__;const x=(A=function(e){var t,r,n=e.loading,o=void 0!==n&&n,a=e.response,i=void 0!==a&&a,l=e.error,c=void 0!==l&&l,u=(e.query,e.onSubmit),s=void 0===u?function(){}:u,m=e.onCancel,f=void 0===m?function(){}:m,v=(t=_(!0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=v[0],p=v[1];return T((function(){d||p(!0)}),[o]),React.createElement(React.Fragment,null,o?React.createElement(k,{className:"loading",label:M("Making query to Vimeo","codeflavors-vimeo-video-post-lite")},M("Please wait...","codeflavors-vimeo-video-post-lite"),React.createElement(P,null)):React.createElement("div",null,c?d&&React.createElement(q,{status:"error",onRemove:function(){f(),p(!1)}},c.message):React.createElement(O,{data:i,onClick:s,onCancel:f})))},function(e){var t=f(y({loading:!0,response:!1,error:!1}),2),r=t[0],n=t[1];return b((function(){r.loading||n({loading:!0,response:!1,error:!1})}),[e.query]),r.loading&&d({path:"/vimeotheque/v1/api-query/video/?id=".concat(e.query),method:"GET"}).then((function(e){n({loading:!1,response:e,error:!1})})).catch((function(e){n({loading:!1,response:!1,error:e})})),React.createElement(A,m({},r,e))});var D=wp,U=D.components,B=U.Spinner,F=U.Notice,V=U.Placeholder,$=U.Button,L=D.i18n.__,G=function(e,t){return function(t){var r=f(y({loading:!0,response:!1,error:!1}),2),n=r[0],o=r[1];return b((function(){n.loading||o({loading:!0,response:!1,error:!1})}),[t.video]),n.loading&&d({path:"/vimeotheque/v1/wp/post-create/",method:"POST",data:s({video:t.video,post_id:vmtqVideoSettings.postId},t.params)}).then((function(e){o({loading:!1,response:e,error:!1})})).catch((function(e){o({loading:!1,response:!1,error:e})})),React.createElement(e,m({},n,t))}}((function(e){e.video;var t=e.loading,r=void 0!==t&&t,n=e.response,o=void 0!==n&&n,a=e.error,i=void 0!==a&&a,l=e.onMessageClose,c=void 0===l?function(){}:l;return React.createElement(React.Fragment,null,r?React.createElement(V,{className:"loading",label:L("Saving video","codeflavors-vimeo-video-post-lite")},L("Your video post is being created, please wait...","codeflavors-vimeo-video-post-lite"),React.createElement(B,null)):React.createElement("div",null,i?React.createElement(F,{status:"error",onRemove:c},i.message):React.createElement(V,{label:o.message},React.createElement($,{isPrimary:!0,href:o.editLink},L("Edit post","codeflavors-vimeo-video-post-lite")),React.createElement($,{isSecondary:!0,href:o.viewLink},L("View post","codeflavors-vimeo-video-post-lite")),React.createElement($,{isTertiary:!0,onClick:c},L("Import another video","codeflavors-vimeo-video-post-lite")))))}));const Y=G;function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var J=wp.element,K=J.createRoot,Q=J.useState,W=function(){var e=z(Q(""),2),t=e[0],r=e[1],n=z(Q(!1),2),o=n[0],a=n[1],i=z(Q({}),2),c=i[0],u=i[1];return React.createElement("div",{className:"vimeotheque-video-import-app",key:"vimeotheque-single-video-import-app"},o&&React.createElement(Y,{video:o,params:c,onMessageClose:function(){a(!1),u({}),r("")}}),!o&&t&&React.createElement(x,{query:t,onSubmit:function(e,t){a(e),u(t)},onCancel:function(){r("")}}),!o&&!t&&React.createElement(l,{onSubmit:function(e){r(e)}}))};K(document.getElementById("vimeotheque-import-video")).render(React.createElement(W,null))})();